<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Quiz for CSS Aspirants - SYED ASGHAR ALI SHAH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Disable Text Selection */
        body {
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE10+/Edge */
            user-select: none; /* Standard */
            font-family: 'Inter', sans-serif; /* Default font */
        }
        /* Basic scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Style for question container */
        .question-container {
            background-color: #ffffff;
            padding: 1.5rem; /* p-6 */
            margin-bottom: 1rem; /* mb-4 */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            border: 1px solid #e5e7eb; /* border border-gray-200 */
        }
        /* Style for radio button labels */
        .option-label {
            display: block;
            padding: 0.75rem; /* p-3 */
            margin-bottom: 0.5rem; /* mb-2 */
            border: 1px solid #d1d5db; /* border border-gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .option-label:hover {
            background-color: #f3f4f6; /* hover:bg-gray-100 */
        }
        /* Style for selected radio button label */
        input[type="radio"]:checked + .option-label {
            background-color: #dbeafe; /* bg-blue-100 */
            border-color: #3b82f6; /* border-blue-500 */
            font-weight: 600; /* font-semibold */
        }
        /* Hide actual radio button */
        input[type="radio"] {
            display: none;
        }
        /* Ensure footer stays at the bottom */
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100" oncontextmenu="return false;">

    <header class="bg-gradient-to-r from-blue-700 to-indigo-800 text-white p-4 shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center space-x-4 mb-4 md:mb-0">
                <img
                    src="https://media-hosting.imagekit.io//0b9a4af30efb4482/WhatsApp%20Image%202025-02-28%20at%203.15.19%20AM.jpeg?Expires=1835349432&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=jwJPYv24ynvpiPUADnh2kUGPUbG6OBggLpvXOj6~ZZAgts7lamWPTIZKmuIaQ5WaRUAG568acIjSbBE1XrKsIPvCHTXKNA-XF6ppaM~tacD0TMTVoTFd7-EsYFsesMaR~5AK7n5qr33hIwKVawluJ1rkdqmuQokM~T~W~O~6Yo-qXgYGio2IvfBsu1u~wEi1Cnk-5pAOavMUb9IfeY7E4FNwGBgiLCiHugKJD9sAY8As7S0szpehWI8WIQzMzNUFN4wvtPAamSART1m5nlUT4uLcvwdr-C1pk4kJN6I0itWzZEbZN04ANZexY3dpBhUDO0~UvQBCps64LPKIQBRYtA__"
                    alt="User Image"
                    class="w-16 h-16 rounded-full border-2 border-white object-cover shadow-md"
                    onerror="this.onerror=null; this.src='https://placehold.co/64x64/e2e8f0/4a5568?text=SAAS';"
                >
                <div>
                    <h1 class="text-xl md:text-2xl font-bold">QUIZ FOR CSS ASPIRANTS</h1>
                    <p class="text-sm md:text-md font-semibold">23 APRIL 2025</p>
                    <p class="text-xs md:text-sm font-medium mt-1">SYED ASGHAR ALI SHAH</p>
                </div>
            </div>
            <div id="timer-display" class="text-lg font-semibold bg-white text-red-600 px-4 py-2 rounded-lg shadow-md hidden">
                Time Left: <span id="time">25:00</span>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="nameEntrySection" class="bg-white p-6 md:p-8 rounded-lg shadow-lg max-w-lg mx-auto text-center">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">Enter Your Name to Begin</h2>
            <div class="mb-4">
                <label for="studentName" class="sr-only">Your Name</label>
                <input type="text" id="studentName" name="studentName" placeholder="Enter your full name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg" required>
            </div>
            <button id="startBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                Start Quiz
            </button>
            <p id="nameError" class="text-red-500 text-sm mt-3 hidden">Please enter your name.</p>
        </section>

        <section id="quizSection" class="hidden">
            <form id="quizForm">
                <div id="questionsContainer" class="space-y-6"></div>

                <div class="mt-8 text-center">
                    <button type="submit" id="submitBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50">
                        Submit Quiz
                    </button>
                </div>
            </form>
        </section>

        <section id="resultsSection" class="hidden bg-white p-6 md:p-8 rounded-lg shadow-lg max-w-xl mx-auto text-center">
            <h2 class="text-3xl font-bold mb-6 text-gray-800">Quiz Results</h2>
            <div class="space-y-4 text-left text-lg border border-gray-200 p-6 rounded-md bg-gray-50">
                <p><strong class="font-semibold text-gray-700">Name:</strong> <span id="resultName" class="text-blue-700 font-medium"></span></p>
                <p><strong class="font-semibold text-gray-700">Questions Attempted:</strong> <span id="resultAttempted" class="text-blue-700 font-medium"></span> / 50</p>
                <p><strong class="font-semibold text-gray-700">Correct Answers:</strong> <span id="resultScore" class="text-green-700 font-bold"></span> / 50</p>
                <p><strong class="font-semibold text-gray-700">Percentage:</strong> <span id="resultPercentage" class="text-green-700 font-bold"></span>%</p>
                <p><strong class="font-semibold text-gray-700">Time Taken:</strong> <span id="resultTime" class="text-blue-700 font-medium"></span></p>
            </div>
             <p class="mt-6 text-gray-600 text-sm">Your results have been submitted. Thank you for participating!</p>
        </section>

        <form id="hiddenForm" action="https://formspree.io/f/xwpvddea" method="POST" class="hidden">
            <input type="hidden" name="student_name" id="formName">
            <input type="hidden" name="attempted_questions" id="formAttempted">
            <input type="hidden" name="score" id="formScore">
            <input type="hidden" name="percentage" id="formPercentage">
            <input type="hidden" name="time_taken" id="formTime">
        </form>

    </main>

    <footer class="bg-gray-800 text-white p-6 mt-12">
        <div class="container mx-auto text-center">
            <p class="font-semibold text-lg mb-2">Prepare for Success!</p>
            <p class="mb-2">Contact for Queries: <a href="tel:03265762698" class="hover:text-blue-400 transition duration-300">03265762698</a></p>
            <p class="text-sm text-gray-400">&copy; 2025 SYED ASGHAR ALI SHAH - All Rights Reserved</p>
        </div>
    </footer>

    <script>
        // --- Quiz Data (Strictly from provided PDFs - Source references removed) ---
        const quizData = [
            // --- Grammar Analysis PDF ---
            {
                question: "1. Which of the following is listed as an example of a Proper Noun in the source material?",
                options: { a: "country", b: "tariffs", c: "Singapore", d: "game" },
                answer: "c"
            },
            {
                question: "2. 'Devastation', 'impact', and 'flexibility' are examples of which type of noun, according to the source material?",
                options: { a: "Common Noun", b: "Collective Noun", c: "Proper Noun", d: "Abstract Noun" },
                answer: "d"
            },
            {
                question: "3. In the sentence snippet '...how developed they are...', what type of pronoun is 'they'?",
                options: { a: "Possessive", b: "Personal", c: "Relative", d: "Demonstrative" },
                answer: "b"
            },
            {
                question: "4. Which word from the text functions as a Relative Pronoun introducing a dependent clause?",
                options: { a: "his", b: "this", c: "which", d: "something" },
                answer: "c"
            },
             {
                question: "5. The terms 'levies', 'shook', and 'negotiate' are identified as examples of what type of verb?",
                options: { a: "Linking Verbs", b: "Helping Verbs", c: "Action Verbs", d: "Modal Verbs" },
                answer: "c"
            },
            {
                question: "6. In the phrase 'raging in Ukraine, Gaza and Sudan', 'raging' is identified as what verb form acting like an adjective?",
                options: { a: "Gerund", b: "Infinitive", c: "Past Participle", d: "Present Participle" },
                answer: "d"
            },
            {
                question: "7. In the phrase 'ending trade between itself and the other country', 'ending' is used as a:",
                options: { a: "Present Participle (adjective)", b: "Gerund (noun)", c: "Main Verb", d: "Infinitive" },
                answer: "b"
            },
             {
                question: "8. Based on examples from the source, 'high-stakes', 'peace-time', and 'large-scale' are classified as:",
                options: { a: "Descriptive Adjectives", b: "Articles", c: "Demonstrative Adjectives", d: "Possessive Adjectives" },
                answer: "a"
            },
            {
                question: "9. The word 'unilaterally' in 'Trump unilaterally began this trade game...' is given as an example of an adverb modifying:",
                options: { a: "an Adjective", b: "another Adverb", c: "a Verb", d: "a Noun" },
                answer: "c"
            },
            {
                question: "10. In the phrase 'exceedingly high levels', 'exceedingly' is an adverb modifying:",
                options: { a: "a Verb ('levels')", b: "an Adjective ('high')", c: "a Noun ('levels')", d: "another Adverb" },
                answer: "b"
            },
            {
                question: "11. 'Of', 'on', 'by', 'without', 'through', 'from', and 'between' are examples of what part of speech?",
                options: { a: "Conjunctions", b: "Adverbs", c: "Prepositions", d: "Interjections" },
                answer: "c"
            },
            {
                question: "12. The prepositional phrase 'at the expense of consumers' uses which preposition primarily to link 'expense' and 'consumers'?",
                options: { a: "of", b: "at", c: "expense", d: "consumers" },
                answer: "b" // Rephrased slightly to avoid ambiguity, 'at' governs the whole phrase
            },
            {
                question: "13. 'For, And, Nor, But, Or, Yet, So' (FANBOYS) are identified as which type of conjunction?",
                options: { a: "Subordinating", b: "Correlative", c: "Coordinating", d: "Adverbial" },
                answer: "c"
            },
            {
                question: "14. In the sentence 'Trump is neither mad nor stupid', 'neither...nor' is an example of which type of conjunction?",
                options: { a: "Coordinating", b: "Subordinating", c: "Correlative", d: "Complementizer" },
                answer: "c"
            },
            {
                question: "15. A group of words containing a subject and a verb but cannot stand alone is called a/an:",
                options: { a: "Independent Clause", b: "Phrase", c: "Dependent Clause", d: "Simple Sentence" },
                answer: "c"
            },
            {
                question: "16. The clause 'who will bear the cost of tariffs' in the sentence '...consumers who will bear the cost of tariffs...' is identified as what type of dependent clause?",
                options: { a: "Noun Clause", b: "Adverb Clause", c: "Adjective Clause (Relative Clause)", d: "Independent Clause" },
                answer: "c"
            },
            {
                question: "17. 'Has long been used' and 'could have retaliated' are examples of which type of phrase?",
                options: { a: "Noun Phrase", b: "Prepositional Phrase", c: "Verb Phrase", d: "Adjective Phrase" },
                answer: "c"
            },
            {
                question: "18. The phrase 'raging in Ukraine, Gaza and Sudan' is given as an example of a:",
                options: { a: "Gerund Phrase", b: "Infinitive Phrase", c: "Prepositional Phrase", d: "Participial Phrase" },
                answer: "d"
            },
            {
                question: "19. A sentence containing one independent clause and at least one dependent clause is classified as a:",
                options: { a: "Simple Sentence", b: "Compound Sentence", c: "Complex Sentence", d: "Compound-Complex Sentence" },
                answer: "c"
            },
            {
                question: "20. The sentence 'International trade is a peace-time activity' is an example of a:",
                options: { a: "Complex Sentence", b: "Simple Sentence", c: "Compound Sentence", d: "Compound-Complex Sentence" },
                answer: "b"
            },
            {
                question: "21. Which punctuation mark is used to show possession (e.g., Trump's view)?",
                options: { a: "Comma (,)", b: "Apostrophe (')", c: "Hyphen (-)", d: "Semicolon (;)" },
                answer: "b"
            },
            {
                question: "22. In the source text, single quotes (' ') are noted as being used primarily for:",
                options: { a: "Direct quotations", b: "Indicating contractions", c: "Emphasis or marking a term being discussed", d: "Separating items in a list" },
                answer: "c"
            },
             {
                question: "23. The verb tense used for actions happening regularly or general truths (e.g., 'trade is', 'conflicts involve') is:",
                options: { a: "Simple Past", b: "Present Perfect", c: "Simple Present", d: "Past Continuous" },
                answer: "c"
            },
            {
                question: "24. The sentence '...phrase ‘trade war’ has long been used...' is an example of which voice?",
                options: { a: "Active Voice", b: "Passive Voice", c: "Middle Voice", d: "Reflexive Voice" },
                answer: "b"
            },
            {
                question: "25. The mood used for stating facts or opinions (most sentences in the text) is the:",
                options: { a: "Imperative Mood", b: "Subjunctive Mood", c: "Indicative Mood", d: "Interrogative Mood" },
                answer: "c"
            },
            {
                question: "26. Which example demonstrates parallelism in a list of verbs/infinitives?",
                options: { a: "'the loss of life, deep human trauma and the destruction...'", b: "'take counter steps, negotiate, or retaliate.'", c: "'commentators, analysts, pundits, and economists...'", d: "'neither mad nor stupid.'" },
                answer: "b"
            },
             {
                question: "27. Rearrange the following phrases into a coherent part of a sentence: (1) to describe / (2) the process / (3) used / (4) has long been",
                options: { a: "3, 1, 2, 4", b: "4, 3, 1, 2", c: "1, 2, 3, 4", d: "3, 4, 1, 2" },
                answer: "b" // "has long been used to describe the process"
            },

            // --- Idioms, Synonyms, Antonyms PDF ---
            {
                question: "28. What is the meaning of the idiom 'At the heart of'?",
                options: { a: "On the outer edge", b: "The least important part", c: "The most central or important part", d: "A temporary solution" },
                answer: "c"
            },
            {
                question: "29. 'Curtail' and 'limit' are synonyms for which idiom?",
                options: { a: "Woke up too late", b: "Clip the province's control", c: "Little wonder", d: "Clutch at straws" },
                answer: "b"
            },
            {
                question: "30. What is an antonym for the idiom 'Woke up too late'?",
                options: { a: "Realized belatedly", b: "Missed the boat", c: "Acted timely / Foresaw", d: "Slow on the uptake" },
                answer: "c"
            },
             {
                question: "31. The idiom 'Clutch at straws' means trying desperate measures. What is an antonym?",
                options: { a: "Grasp at straws", b: "Hope against hope", c: "Resort to desperate measures", d: "Be realistic / Accept the inevitable" },
                answer: "d"
            },
            {
                question: "32. 'In control' and 'running the show' are provided as synonyms for which idiom?",
                options: { a: "In a bind", b: "Calling the shots", c: "Panacea for our economic woes", d: "Go a long way" },
                answer: "b"
            },
            {
                question: "33. 'Panacea for our economic woes' refers to a supposed cure-all. Which phrase is a synonym?",
                options: { a: "Specific solution", b: "Partial remedy", c: "Contributing factor", d: "Magic bullet / Universal remedy" },
                answer: "d"
            },
            {
                question: "34. What is the meaning of the idiom 'Encroaching on'?",
                options: { a: "Respecting boundaries", b: "Withdrawing from", c: "Gradually intruding upon or taking over", d: "Staying within limits" },
                answer: "c"
            },
             {
                question: "35. 'Pulled no punches' means speaking frankly. What is an antonym?",
                options: { a: "Spoke bluntly", b: "Was direct", c: "Didn't hold back", d: "Was diplomatic / Beat around the bush" },
                answer: "d"
            },
            {
                question: "36. 'Felt disappointed, betrayed, abandoned' are synonyms given for which idiom?",
                options: { a: "Set on", b: "Hold on to", c: "Felt let down", d: "In trouble" },
                answer: "c"
            },
            {
                question: "37. 'Keep, retain, maintain' are synonyms for the idiom:",
                options: { a: "Set on", b: "Hold on to", c: "In trouble", d: "Plays a vital role" },
                answer: "b"
            },
            {
                question: "38. 'Backbone of the economy' means the most important part. Which term is a synonym?",
                options: { a: "Minor sector", b: "Peripheral industry", c: "Foundation / Mainstay / Cornerstone", d: "Temporary boost" },
                answer: "c"
            },
             {
                question: "39. What does 'Paradigm shift' mean?",
                options: { a: "Status quo", b: "Incremental change", c: "A fundamental change in approach or assumptions", d: "Maintaining continuity" },
                answer: "c"
            },
            {
                question: "40. The idiom 'Risen against' means to rebel. What is an antonym?",
                options: { a: "Rebelled against", b: "Protested against", c: "Revolted against", d: "Supported / Accepted / Submitted to" },
                answer: "d"
            },
            {
                question: "41. 'Supported by, endorsed by, sponsored by' are synonyms for which idiom?",
                options: { a: "Turned into", b: "Backed by", c: "Pitted against", d: "Corridors of power" },
                answer: "b"
            },
            {
                question: "42. 'Corridors of power' refers to places of decision-making. What represents the opposite?",
                options: { a: "Halls of power", b: "Seats of government", c: "High places", d: "Grassroots level / General public" },
                answer: "d"
            },
            {
                question: "43. What does the idiom 'Exposed the fault lines' mean?",
                options: { a: "Concealed divisions", b: "Maintained unity", c: "Strengthened bonds", d: "Revealed underlying weaknesses or divisions" },
                answer: "d"
            },
            {
                question: "44. 'Erupted, intensified, broke out' are synonyms for which idiom related to sudden worsening?",
                options: { a: "Flared up", b: "Made things worse", c: "Trampling on", d: "Not without reason" },
                answer: "a"
            },
            {
                question: "45. 'Trampling on' means treating rights with disrespect. What is an antonym?",
                options: { a: "Violating", b: "Disregarding", c: "Infringing upon", d: "Respecting / Upholding / Honoring" },
                answer: "d"
            },
            {
                question: "46. 'Led the way, initiated, spearheaded' are synonyms for which idiom?",
                options: { a: "Not without reason", b: "Took the lead", c: "Broke its silence", d: "Moment of reckoning" },
                answer: "b"
            },
            {
                question: "47. What is the primary distinction between 'Legislation' and 'Legislature'?",
                options: { a: "Legislation is the body, Legislature are the laws", b: "Legislation are the laws, Legislature is the law-making body", c: "They are exact synonyms", d: "Legislation is spoken, Legislature is written" },
                answer: "b"
            },
            {
                question: "48. How does 'Consensus' differ from 'Agreement'?",
                options: { a: "Agreement implies broader accord, Consensus is specific", b: "Consensus implies broader, general accord among a group", c: "Consensus is always written, Agreement is verbal", d: "There is no difference mentioned" },
                answer: "b"
            },
            {
                question: "49. Between 'Viable' and 'Feasible', which word often implies long-term success capability?",
                options: { a: "Feasible", b: "Viable", c: "Both equally", d: "Neither" },
                answer: "b"
            },
             {
                question: "50. Rearrange the following phrases based on the example sentence for 'Tit-for-tat': (1) exchange / (2) is a tit-for-tat / (3) The US-China / (4) tariff situation",
                options: { a: "3, 4, 2, 1", b: "1, 2, 3, 4", c: "4, 3, 1, 2", d: "2, 1, 4, 3" },
                answer: "a" // "The US-China tariff situation is a tit-for-tat exchange."
            }
        ];


        // --- DOM Elements ---
        const nameEntrySection = document.getElementById('nameEntrySection');
        const studentNameInput = document.getElementById('studentName');
        const nameError = document.getElementById('nameError');
        const startBtn = document.getElementById('startBtn');
        const quizSection = document.getElementById('quizSection');
        const questionsContainer = document.getElementById('questionsContainer');
        const quizForm = document.getElementById('quizForm');
        const submitBtn = document.getElementById('submitBtn');
        const resultsSection = document.getElementById('resultsSection');
        const timerDisplay = document.getElementById('timer-display');
        const timeEl = document.getElementById('time');

        // Result display elements
        const resultName = document.getElementById('resultName');
        const resultAttempted = document.getElementById('resultAttempted');
        const resultScore = document.getElementById('resultScore');
        const resultPercentage = document.getElementById('resultPercentage');
        const resultTime = document.getElementById('resultTime');

        // Hidden form elements
        const hiddenForm = document.getElementById('hiddenForm');
        const formName = document.getElementById('formName');
        const formAttempted = document.getElementById('formAttempted');
        const formScore = document.getElementById('formScore');
        const formPercentage = document.getElementById('formPercentage');
        const formTime = document.getElementById('formTime');

        // --- Quiz State ---
        let timerInterval;
        let timeLeft = 25 * 60; // 25 minutes in seconds
        let startTime;
        let studentName = '';
        let quizSubmitted = false; // Flag to prevent multiple submissions

        // --- Functions ---

        // Shuffle options for a question
        function shuffleOptions(options) {
            const entries = Object.entries(options);
            for (let i = entries.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [entries[i], entries[j]] = [entries[j], entries[i]]; // Swap
            }
            return Object.fromEntries(entries);
        }


        // Load Questions into the DOM
        function loadQuestions() {
            questionsContainer.innerHTML = ''; // Clear previous questions if any
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('question-container');

                const questionText = document.createElement('p');
                questionText.classList.add('text-lg', 'font-semibold', 'mb-4', 'text-gray-900');
                questionText.textContent = q.question;
                questionDiv.appendChild(questionText);

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('space-y-2');

                // Shuffle options before displaying
                const shuffledOptions = shuffleOptions(q.options);

                for (const key in shuffledOptions) {
                    const optionId = `q${index}_${key}`;

                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.id = optionId;
                    radioInput.name = `question${index}`;
                    radioInput.value = key;
                    // Hidden by CSS, label acts as the clickable element

                    const label = document.createElement('label');
                    label.htmlFor = optionId;
                    label.textContent = `${key.toUpperCase()}. ${shuffledOptions[key]}`;
                    label.classList.add('option-label', 'text-gray-700'); // Apply label styles

                    optionsDiv.appendChild(radioInput);
                    optionsDiv.appendChild(label);
                }

                questionDiv.appendChild(optionsDiv);
                questionsContainer.appendChild(questionDiv);
            });
        }

        // Start Timer
        function startTimer() {
            startTime = new Date();
            timerDisplay.classList.remove('hidden'); // Show timer display
            timeEl.textContent = formatTime(timeLeft);

            timerInterval = setInterval(() => {
                timeLeft--;
                timeEl.textContent = formatTime(timeLeft);

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(); // Auto-submit when time runs out
                }
            }, 1000);
        }

        // Format Time (MM:SS)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // Calculate Time Taken
        function calculateTimeTaken() {
            if (!startTime) return 'N/A';
            const endTime = new Date();
            const timeDiff = Math.round((endTime - startTime) / 1000); // Difference in seconds
            const totalTime = 25 * 60;
            // Calculate time taken based on timer remaining or total if finished early/on time
            const timeTakenSeconds = Math.min(timeDiff, totalTime);
             // If auto-submitted exactly on time, timeLeft might be 0 or -1
            if(timeLeft <= 0) {
                 return formatTime(totalTime);
            }
            return formatTime(timeTakenSeconds);
        }


        // Calculate Results
        function calculateResults() {
            let score = 0;
            let attempted = 0;
            const formData = new FormData(quizForm);

            quizData.forEach((q, index) => {
                const userAnswer = formData.get(`question${index}`);
                if (userAnswer) {
                    attempted++;
                    if (userAnswer === q.answer) {
                        score++;
                    }
                }
            });

            const percentage = ((score / quizData.length) * 100).toFixed(1);
            const timeTaken = calculateTimeTaken();

            return { score, attempted, percentage, timeTaken };
        }

        // Display Results
        function displayResults(results) {
            resultName.textContent = studentName;
            resultAttempted.textContent = results.attempted;
            resultScore.textContent = results.score;
            resultPercentage.textContent = results.percentage;
            resultTime.textContent = results.timeTaken;

            // Populate hidden form
            formName.value = studentName;
            formAttempted.value = results.attempted;
            formScore.value = results.score;
            formPercentage.value = results.percentage;
            formTime.value = results.timeTaken;

            // Show results and hide quiz
            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            timerDisplay.classList.add('hidden'); // Hide timer on results page

            // Submit the hidden form
            hiddenForm.submit();
        }

        // Submit Quiz Logic
        function submitQuiz() {
            if (quizSubmitted) return; // Prevent multiple submissions
            quizSubmitted = true;

            clearInterval(timerInterval); // Stop the timer
            const results = calculateResults();
            displayResults(results);
        }


        // --- Event Listeners ---

        // Start Button Click
        startBtn.addEventListener('click', () => {
            studentName = studentNameInput.value.trim();
            if (studentName) {
                nameError.classList.add('hidden');
                nameEntrySection.classList.add('hidden');
                loadQuestions(); // Load questions into the DOM
                quizSection.classList.remove('hidden');
                startTimer();
            } else {
                nameError.classList.remove('hidden');
            }
        });

        // Quiz Form Submission
        quizForm.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent default form submission
            submitQuiz();
        });

        // --- Disable Right Click ---
        // Already handled by oncontextmenu="return false;" in body tag

    </script>

</body>
</html>
