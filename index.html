<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ FOR CSS ASPIRANTS 03 MAY 2025 - SYED ASGHAR ALI SHAH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter font */
            user-select: none; /* Disable text selection */
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE/Edge */
            background-color: #f3f4f6; /* Slightly off-white background */
        }
        /* Style for preventing selection overlay */
        ::selection {
            background: transparent;
        }
        ::-moz-selection {
            background: transparent;
        }
        /* Enhanced styling for quiz options */
        .quiz-option label {
            display: block;
            padding: 12px 18px; /* Slightly larger padding */
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
            margin-bottom: 0.75rem; /* mb-3 */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: #ffffff; /* White background for options */
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .quiz-option label:hover {
            background-color: #eef2ff; /* indigo-50 */
            border-color: #818cf8; /* indigo-300 */
            transform: translateY(-1px); /* Slight lift on hover */
        }
        .quiz-option input[type="radio"] {
            display: none; /* Hide the actual radio button */
        }
        .quiz-option input[type="radio"]:checked + label {
            background-color: #6366f1; /* indigo-500 */
            border-color: #4f46e5; /* indigo-700 */
            color: white; /* White text for selected option */
            font-weight: 600; /* font-semibold */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        /* Style for header/footer */
        header, footer {
            background: linear-gradient(to right, #1f2937, #374151); /* gray-800 to gray-700 gradient */
            color: white;
            padding: 1.5rem 2rem; /* Increased padding */
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        /* Ensure image fits well */
        .header-image {
            width: 70px; /* Slightly larger image */
            height: 70px;
            border-radius: 50%; /* Make it circular */
            object-fit: cover;
            border: 3px solid #facc15; /* yellow-400 border */
            box-shadow: 0 0 10px rgba(250, 204, 21, 0.5);
        }
         /* Style for buttons */
        button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 600; /* font-semibold */
            padding: 12px 24px; /* Standardized padding */
        }
        button:hover {
            transform: translateY(-2px) scale(1.02); /* Add slight scale on hover */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        button:active {
            transform: translateY(0) scale(1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        #start-quiz-btn { background-color: #2563eb; color: white; } /* blue-600 */
        #start-quiz-btn:hover { background-color: #1d4ed8; } /* blue-700 */
        #submit-quiz-btn { background-color: #16a34a; color: white; } /* green-600 */
        #submit-quiz-btn:hover { background-color: #15803d; } /* green-700 */

        /* Styling for timer */
        #timer {
            transition: all 0.3s ease;
        }
        .timer-normal { background-color: #fef3c7; color: #ca8a04; } /* amber-100 text-amber-600 */
        .timer-warning { background-color: #fecaca; color: #dc2626; animation: pulse 1.5s infinite; } /* red-200 text-red-600 */

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Results section styling */
        #results-section h2 { color: #1d4ed8; } /* blue-700 */
        #results-section strong { color: #374151; } /* gray-700 */
        #results-section span { color: #111827; } /* gray-900 */

        /* Question container */
         .question-container {
            background-color: #ffffff;
            padding: 1.5rem; /* p-6 */
            margin-bottom: 1.5rem; /* mb-6 */
            border-radius: 0.5rem; /* rounded-lg */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
         }
         .question-title {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            margin-bottom: 1rem; /* mb-4 */
            color: #1f2937; /* gray-800 */
            line-height: 1.6; /* Improved readability */
         }

    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col" oncontextmenu="return false;" onkeydown="return disableKeys(event);">

    <header class="m-4 rounded-xl shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="text-center md:text-left mb-4 md:mb-0">
                <h1 class="text-3xl md:text-4xl font-bold text-yellow-400 tracking-tight">QUIZ FOR CSS ASPIRANTS</h1>
                <p class="text-xl md:text-2xl font-semibold text-gray-200">03 MAY 2025</p>
                <p class="text-lg md:text-xl font-medium mt-1 text-gray-300">SYED ASGHAR ALI SHAH</p>
            </div>
            <img src="https://media-hosting.imagekit.io//0b9a4af30efb4482/WhatsApp%20Image%202025-02-28%20at%203.15.19%20AM.jpeg?Expires=1835349432&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=jwJPYv24ynvpiPUADnh2kUGPUbG6OBggLpvXOj6~ZZAgts7lamWPTIZKmuIaQ5WaRUAG568acIjSbBE1XrKsIPvCHTXKNA-XF6ppaM~tacD0TMTVoTFd7-EsYFsesMaR~5AK7n5qr33hIwKVawluJ1rkdqmuQokM~T~W~O~6Yo-qXgYGio2IvfBsu1u~wEi1Cnk-5pAOavMUb9IfeY7E4FNwGBgiLCiHugKJD9sAY8As7S0szpehWI8WIQzMzNUFN4wvtPAamSART1m5nlUT4uLcvwdr-C1pk4kJN6I0itWzZEbZN04ANZexY3dpBhUDO0~UvQBCps64LPKIQBRYtA__"
                 alt="Syed Asghar Ali Shah"
                 class="header-image"
                 onerror="this.onerror=null; this.src='https://placehold.co/70x70/1f2937/facc15?text=SAS';">
        </div>
    </header>

    <main class="container mx-auto p-4 flex-grow">

        <section id="name-section" class="bg-white p-8 rounded-lg shadow-lg text-center max-w-lg mx-auto">
            <h2 class="text-3xl font-bold mb-6 text-gray-800">Enter Your Name to Begin</h2>
            <input type="text" id="student-name" placeholder="Full Name" class="w-full p-3 border border-gray-300 rounded-md mb-5 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition duration-200 text-lg">
            <button id="start-quiz-btn">
                Start Quiz
            </button>
            <p id="name-error" class="text-red-600 mt-3 hidden font-medium">Please enter your name.</p>
        </section>

        <section id="quiz-section" class="hidden bg-transparent p-0 rounded-lg">
             <div class="flex flex-col sm:flex-row justify-between items-center mb-6 px-1">
                 <h2 class="text-2xl font-semibold text-gray-800 mb-3 sm:mb-0">Quiz Questions</h2>
                 <div id="timer" class="text-xl font-bold timer-normal px-4 py-2 rounded-lg shadow-md">40:00</div>
            </div>

            <form id="quiz-form">
                </form>

            <button id="submit-quiz-btn" class="mt-8 w-full">
                Submit Quiz
            </button>
        </section>

        <section id="results-section" class="hidden bg-white p-8 rounded-lg shadow-lg text-center max-w-lg mx-auto">
            <h2 class="text-4xl font-bold mb-8">Quiz Results</h2>
            <div class="text-left space-y-4 text-xl">
                <p><strong class="w-48 inline-block">Name:</strong> <span id="result-name"></span></p>
                <p><strong class="w-48 inline-block">Attempted:</strong> <span id="result-attempted"></span></p>
                <p><strong class="w-48 inline-block">Correct Answers:</strong> <span id="result-score" class="font-bold text-green-600"></span></p>
                <p><strong class="w-48 inline-block">Percentage:</strong> <span id="result-percentage" class="font-bold text-indigo-600"></span></p>
                <p><strong class="w-48 inline-block">Time Taken:</strong> <span id="result-time"></span></p>
            </div>
            <p class="mt-8 text-gray-700 text-lg">Your results have been submitted. Thank you for participating!</p>
        </section>

        <form id="hidden-form" action="https://formspree.io/f/xwpvddea" method="POST" class="hidden">
            <input type="text" name="name" id="hidden-name">
            <input type="number" name="attempted" id="hidden-attempted">
            <input type="number" name="score" id="hidden-score">
            <input type="text" name="percentage" id="hidden-percentage">
            <input type="text" name="time_taken" id="hidden-time">
            <input type="hidden" name="_subject" value="New CSS Aspirant Quiz Submission!">
            <input type="text" name="_gotcha" style="display:none"> </form>

    </main>

    <footer class="m-4 rounded-xl shadow-lg mt-10">
        <div class="container mx-auto text-center">
            <p class="text-xl font-semibold mb-2 text-yellow-400">Prepare Systematically, Perform Confidently!</p>
            <p class="text-gray-200 text-lg">Contact: 03265762698</p>
            <p class="text-sm text-gray-400 mt-3">&copy; 2025 SYED ASGHAR ALI SHAH - All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- Configuration ---
        const quizDuration = 40 * 60; // 40 minutes in seconds
        const totalQuestions = 100; // Total number of questions

        // --- Quiz Questions ---
        // Generated 100 questions based on provided PDFs and page constraints.
        const quizQuestions = [
            // === 50 Grammar/Vocabulary Questions ===
            // (Derived from Grammar Notes & Idioms PDFs)

            // Part of Speech / Word Class
            { question: "In the sentence 'The *escalating* tensions concerned the diplomats,' what is the grammatical function of 'escalating'?", options: ["Gerund", "Main Verb", "Present Participle used as Adjective", "Adverb"], answer: "Present Participle used as Adjective", source: "grammar" },
            { question: "Identify the abstract noun in the following options:", options: ["Diplomat", "Sanctions", "Optimism", "Exports"], answer: "Optimism", source: "grammar" },
            { question: "Which word acts as a preposition in the sentence: 'He walked *past* the house without looking.'?", options: ["Adverb", "Preposition", "Conjunction", "Adjective"], answer: "Preposition", source: "grammar" },
            { question: "In 'Maintaining stability *has proven* difficult,' the underlined words form a:", options: ["Noun Phrase", "Verb Phrase", "Prepositional Phrase", "Adjective Phrase"], answer: "Verb Phrase", source: "grammar" },
            { question: "What type of pronoun is 'who' in the phrase '...allies, *who* have grown wary...'?", options: ["Personal", "Possessive", "Demonstrative", "Relative"], answer: "Relative", source: "grammar" },
            { question: "The word 'presumably' in '...postponed, *presumably* by Tehran...' functions as what part of speech?", options: ["Adjective", "Conjunction", "Adverb", "Preposition"], answer: "Adverb", source: "grammar" },
            { question: "Which of the following is an example of a collective noun used in the provided texts?", options: ["Sanctions", "Negotiations", "Clergy", "Scientists"], answer: "Clergy", source: "grammar" },

            // Prepositions & Phrasal Verbs
            { question: "Choose the correct preposition: 'The government decided to crack down ____ illegal activities.'", options: ["on", "at", "with", "against"], answer: "on", source: "grammar" },
            { question: "Fill in the blank: 'She is loath ____ accept defeat.'", options: ["with", "to", "of", "about"], answer: "to", source: "idioms" }, // From 'loath to accept'
            { question: "The negotiations broke ____ without reaching an agreement.", options: ["up", "down", "out", "off"], answer: "down", source: "grammar" }, // Common phrasal verb
            { question: "He prides himself ____ his punctuality.", options: ["on", "in", "with", "about"], answer: "on", source: "grammar" },
            { question: "They were prevented ____ entering the restricted area.", options: ["to", "from", "of", "against"], answer: "from", source: "grammar" },

            // Synonyms & Antonyms (from Idioms PDF context)
            { question: "Which word is the closest synonym for 'Dire' as used in 'dire straits'?", options: ["Trivial", "Urgent", "Severe", "Hopeful"], answer: "Severe", source: "idioms" },
            { question: "Select the best antonym for 'Muzzle' in the context of 'muzzle dissent'.", options: ["Silence", "Amplify", "Control", "Restrict"], answer: "Amplify", source: "idioms" },
            { question: "A 'Constant source of friction' implies a situation of:", options: ["Occasional disagreement", "Perpetual conflict", "Complete harmony", "Mutual understanding"], answer: "Perpetual conflict", source: "idioms" },
            { question: "The opposite of 'Backsliding' on freedom is:", options: ["Regressing", "Stagnating", "Deteriorating", "Progressing"], answer: "Progressing", source: "idioms" },
            { question: "If a situation is 'No less grim', it means it is:", options: ["Significantly better", "Slightly worrying", "Equally bad", "Completely hopeless"], answer: "Equally bad", source: "idioms" },
            { question: "The antonym of 'Stifle' (as in 'stifle access') would be:", options: ["Suppress", "Facilitate", "Block", "Restrict"], answer: "Facilitate", source: "idioms" },
            { question: "An antonym for 'Boot out' (expel) is:", options: ["Dismiss", "Eject", "Hire", "Oust"], answer: "Hire", source: "idioms" },
            { question: "The phrase 'Take the lead' is opposite in meaning to:", options: ["Initiate", "Spearhead", "Follow", "Manage"], answer: "Follow", source: "idioms" },
            { question: "An antonym for 'Dragging down' (hindering) is:", options: ["Impeding", "Boosting", "Lowering", "Weakening"], answer: "Boosting", source: "idioms" },
            { question: "'Keep afloat' means to survive financially. Its opposite could be:", options: ["Manage", "Stay solvent", "Go bankrupt", "Succeed"], answer: "Go bankrupt", source: "idioms" },
            { question: "An appropriate synonym for 'Come forward' (volunteer info) is:", options: ["Hold back", "Conceal", "Step up", "Remain silent"], answer: "Step up", source: "idioms" },
            { question: "The antonym for 'Loath' (unwilling) is:", options: ["Reluctant", "Disinclined", "Averse", "Keen"], answer: "Keen", source: "idioms" },
            { question: "A 'Sticking point' is an obstacle. Its opposite is a:", options: ["Hurdle", "Barrier", "Facilitator", "Problem"], answer: "Facilitator", source: "idioms" },

            // Idioms & Phrases Meaning
            { question: "What does 'Wading into' a situation usually imply?", options: ["Careful consideration", "Getting involved, possibly without full thought", "Avoiding involvement", "Resolving a situation easily"], answer: "Getting involved, possibly without full thought", source: "idioms" },
            { question: "To 'Slam the door' on a possibility means to:", options: ["Keep it open", "Consider it carefully", "Reject it forcefully", "Delay a decision"], answer: "Reject it forcefully", source: "idioms" },
            { question: "If something 'Stands out', it is:", options: ["Hidden", "Average", "Very noticeable", "Unimportant"], answer: "Very noticeable", source: "idioms" },
            { question: "What is meant by 'Untangle the knot' in a conflict situation?", options: ["Make it more complex", "Ignore the problem", "Resolve the difficult issues", "Assign blame"], answer: "Resolve the difficult issues", source: "idioms" },
            { question: "The idiom 'Run from pillar to post' describes someone who is:", options: ["Moving steadily towards a goal", "Resting comfortably", "Searching frantically and often futilely", "Making slow progress"], answer: "Searching frantically and often futilely", source: "idioms" },
            { question: "'By no stretch of the imagination' emphasizes that something is:", options: ["Barely possible", "Highly probable", "Certainly not true", "Worth considering"], answer: "Certainly not true", source: "idioms" },
            { question: "What does 'Cast a long shadow' mean?", options: ["To provide shade", "To have a minor influence", "To have a significant, often negative, lasting influence", "To predict the future"], answer: "To have a significant, often negative, lasting influence", source: "idioms" },
            { question: "If suspicions 'run deep', they are:", options: ["Recent and minor", "Superficial and easily dismissed", "Strongly felt and well-established", "Based on clear evidence"], answer: "Strongly felt and well-established", source: "idioms" },

            // Sentence Structure & Clauses
            { question: "Identify the sentence type: 'Although the negotiations were tough, an agreement was eventually reached.'", options: ["Simple", "Compound", "Complex", "Compound-Complex"], answer: "Complex", source: "grammar" },
            { question: "What is the function of the underlined clause: 'The reason *why he left* is still unknown.'?", options: ["Adverb Clause", "Adjective Clause", "Noun Clause (Subject)", "Noun Clause (Object)"], answer: "Noun Clause (Subject)", source: "grammar" },
            { question: "Which sentence contains a non-restrictive clause?", options: ["The man who lives next door is a doctor.", "My brother, who lives in London, is visiting.", "Students who study hard usually succeed.", "The book that I borrowed is overdue."], answer: "My brother, who lives in London, is visiting.", source: "grammar" },
            { question: "Identify the gerund phrase in: 'His primary goal was *achieving financial independence*.'", options: ["His primary goal", "was achieving", "financial independence", "achieving financial independence"], answer: "achieving financial independence", source: "grammar" },
            { question: "Which sentence demonstrates correct subject-verb agreement?", options: ["The committee have reached a decision.", "Neither the players nor the coach are happy.", "The data suggests a different conclusion.", "Each of the students were given a task."], answer: "The data suggests a different conclusion.", source: "grammar" }, // Data often treated as singular in modern usage

            // Punctuation & Mechanics
            { question: "Choose the correctly punctuated sentence:", options: ["She asked, 'Will you be there'.", "He shouted 'Stop!' before running.", "The sign read: 'Danger Keep Out'.", "'I can't believe it,' she whispered."], answer: "'I can't believe it,' she whispered.", source: "grammar" },
            { question: "Which sentence correctly uses an apostrophe for possession?", options: ["The dog wagged its' tail.", "All the student's papers were graded.", "James's car is new.", "The childrens toys are scattered."], answer: "James's car is new.", source: "grammar" },
            { question: "When is a hyphen typically used?", options: ["To indicate the end of a sentence.", "To form compound modifiers before a noun.", "To separate items in a list.", "To show omission of letters."], answer: "To form compound modifiers before a noun.", source: "grammar" },

            // Sentence Rearrangement
            { question: "Rearrange the parts: (P) was seen as (Q) the new regulation (R) to free speech (S) a blow", options: ["QPSR", "QRPS", "SPRQ", "QSRP"], answer: "QPSR", source: "idioms" }, // The new regulation was seen as a blow to free speech.
            { question: "Rearrange the parts: (P) journalists are being killed (Q) at the rate (R) there will be (S) none left soon", options: ["QPSR", "QRPS", "PQRS", "QPRS"], answer: "QPRS", source: "idioms" }, // At the rate journalists are being killed, there will be none left soon.
            { question: "Rearrange the parts: (P) seeking solutions (Q) ordinary people (R) from pillar to post (S) continue to run", options: ["QSRP", "QRSP", "PQRS", "QSPR"], answer: "QSRP", source: "idioms" }, // Ordinary people continue to run from pillar to post seeking solutions.

            // Advanced Grammar / Tricky Concepts
            { question: "Identify the sentence with a dangling modifier:", options: ["Driving through the mountains, the scenery was breathtaking.", "Having studied thoroughly, she aced the exam.", "To win the game, practice is essential.", "Covered in mud, the dog looked pitiful."], answer: "Driving through the mountains, the scenery was breathtaking.", source: "grammar" },
            { question: "Which sentence uses 'who' and 'whom' correctly?", options: ["Whom did you give the book to?", "Who did you see at the party?", "The person whom called earlier left no message.", "She is the one who I admire most."], answer: "Who did you see at the party?", source: "grammar" }, // Note: "Whom did you give the book to?" is technically correct but often seen as overly formal; "Who did you give the book to?" is common. "Who did you see" is unambiguously correct.
            { question: "Choose the sentence with the correct use of 'lie' or 'lay':", options: ["I need to lay down for a while.", "She laid the book on the table yesterday.", "The dog has lain in the sun all day.", "He was laying on the sofa when I arrived."], answer: "She laid the book on the table yesterday.", source: "grammar" },
            { question: "Which sentence correctly uses the subjunctive mood?", options: ["If I was rich, I would travel more.", "I suggest that he goes immediately.", "It is crucial that she be informed.", "He wishes he was taller."], answer: "It is crucial that she be informed.", source: "grammar" },
            { question: "The function of 'however' in 'The task was difficult; however, she completed it.' is a(n):", options: ["Subordinating Conjunction", "Coordinating Conjunction", "Preposition", "Conjunctive Adverb"], answer: "Conjunctive Adverb", source: "grammar" },
            { question: "Which word correctly completes the sentence: 'The ____ effects of the policy were not immediately obvious.'?", options: ["principal", "principle"], answer: "principal", source: "grammar" },
            { question: "Which sentence uses 'less' and 'fewer' correctly?", options: ["There are less people here than expected.", "She has fewer worries now.", "I have less problems than before.", "We need less ingredients for this recipe."], answer: "She has fewer worries now.", source: "grammar" },


            // === 50 General Knowledge Questions ===
            // (Derived from One Paper MCQs PDF, pages ~101-120: World Records, Abbreviations/Terms)

            // World Records (p97-115 approx.)
            { question: "Which is the world's largest ocean by area?", options: ["Atlantic", "Indian", "Arctic", "Pacific"], answer: "Pacific", source: "onepaper" },
            { question: "The Great Wall of China is located in which continent?", options: ["Africa", "Europe", "Asia", "South America"], answer: "Asia", source: "onepaper" },
            { question: "What is the highest waterfall in the world?", options: ["Niagara Falls", "Victoria Falls", "Angel Falls", "Iguazu Falls"], answer: "Angel Falls", source: "onepaper" },
            { question: "Which desert is the largest hot desert in the world?", options: ["Gobi", "Kalahari", "Arabian", "Sahara"], answer: "Sahara", source: "onepaper" },
            { question: "What is the most populous country in the world (as of early 2020s)?", options: ["India", "USA", "China", "Indonesia"], answer: "India", source: "onepaper" }, // Note: India surpassed China. Check context of PDF publication date if needed. Assuming current knowledge.
            { question: "Which is the longest river in Asia?", options: ["Mekong", "Yellow River", "Yangtze", "Ganges"], answer: "Yangtze", source: "onepaper" },
            { question: "What is the world's largest island?", options: ["Borneo", "Madagascar", "Greenland", "New Guinea"], answer: "Greenland", source: "onepaper" },
            { question: "The deepest point in the world's oceans is known as:", options: ["Puerto Rico Trench", "Java Trench", "Mariana Trench", "Tonga Trench"], answer: "Mariana Trench", source: "onepaper" },
            { question: "Which country has the largest number of active volcanoes?", options: ["Japan", "Indonesia", "USA", "Chile"], answer: "Indonesia", source: "onepaper" },
            { question: "What is the world's largest lake by surface area?", options: ["Lake Superior", "Caspian Sea", "Lake Victoria", "Lake Huron"], answer: "Caspian Sea", source: "onepaper" }, // Often classified as largest lake
            { question: "Which continent is the largest by land area?", options: ["Africa", "North America", "Asia", "South America"], answer: "Asia", source: "onepaper" },
            { question: "What is the highest navigable lake in the world?", options: ["Lake Baikal", "Lake Titicaca", "Crater Lake", "Lake Tanganyika"], answer: "Lake Titicaca", source: "onepaper" },
            { question: "Which country is the smallest independent country in the world?", options: ["Monaco", "Nauru", "Vatican City", "San Marino"], answer: "Vatican City", source: "onepaper" },
            { question: "The world's largest coral reef system is:", options: ["Belize Barrier Reef", "Red Sea Coral Reef", "Great Barrier Reef", "Maldives Coral Reefs"], answer: "Great Barrier Reef", source: "onepaper" },
            { question: "Which city is generally considered the oldest continuously inhabited city in the world?", options: ["Rome", "Athens", "Jerusalem", "Damascus"], answer: "Damascus", source: "onepaper" },
            { question: "What is the world's busiest airport by international passenger traffic (pre-COVID/general)?", options: ["London Heathrow", "Dubai International", "Hong Kong International", "Paris Charles de Gaulle"], answer: "Dubai International", source: "onepaper" }, // Check PDF context, this can change. Dubai was often top pre-covid.
            { question: "Which is the highest capital city in the world?", options: ["Quito", "Bogotá", "La Paz", "Addis Ababa"], answer: "La Paz", source: "onepaper" }, // La Paz (administrative), Sucre (constitutional)
            { question: "The world's tallest building (as of early 2020s) is:", options: ["Shanghai Tower", "Makkah Royal Clock Tower", "Burj Khalifa", "Ping An Finance Center"], answer: "Burj Khalifa", source: "onepaper" },
            { question: "Which country produces the most coffee in the world?", options: ["Colombia", "Vietnam", "Ethiopia", "Brazil"], answer: "Brazil", source: "onepaper" },
            { question: "What is the largest rainforest in the world?", options: ["Congo Rainforest", "Amazon Rainforest", "Daintree Rainforest", "Southeast Asian Rainforest"], answer: "Amazon Rainforest", source: "onepaper" },
            { question: "Which is the world's windiest continent?", options: ["Asia", "North America", "Antarctica", "Australia"], answer: "Antarctica", source: "onepaper" },
            { question: "What is the largest bird in the world?", options: ["Emu", "Ostrich", "Cassowary", "Albatross"], answer: "Ostrich", source: "onepaper" },
            { question: "Which country has the longest coastline in the world?", options: ["Russia", "Australia", "Canada", "Indonesia"], answer: "Canada", source: "onepaper" },
            { question: "The world's largest salt flat is known as:", options: ["Bonneville Salt Flats", "Salar de Uyuni", "Etosha Pan", "Makgadikgadi Pan"], answer: "Salar de Uyuni", source: "onepaper" },
            { question: "Which strait is the busiest shipping lane in the world?", options: ["Strait of Hormuz", "Strait of Malacca", "Suez Canal", "English Channel"], answer: "Strait of Malacca", source: "onepaper" }, // Often cited as such

            // Abbreviations, Acronyms and Terms (p116-129 approx.)
            { question: "What does the acronym 'NATO' stand for?", options: ["North African Treaty Organization", "North Atlantic Treaty Organization", "Northern Alliance Treaty Organization", "National Aeronautics Treaty Organization"], answer: "North Atlantic Treaty Organization", source: "onepaper" },
            { question: "The abbreviation 'GDP' in economics stands for:", options: ["General Development Plan", "Gross Domestic Product", "Global Defense Protocol", "Government Debt Portfolio"], answer: "Gross Domestic Product", source: "onepaper" },
            { question: "What does 'UNESCO' represent?", options: ["United Nations Environmental Science Committee", "United Nations Education, Science and Culture Organization", "United European States Cooperation Organization", "Universal Network for Scientific Collaboration"], answer: "United Nations Education, Science and Culture Organization", source: "onepaper" },
            { question: "The term 'FBI' is an abbreviation for which US agency?", options: ["Federal Bureau of Investigation", "Foreign Broadcast Information", "Federal Banking Institute", "Federal Board of Inquiry"], answer: "Federal Bureau of Investigation", source: "onepaper" },
            { question: "'Interpol' is short for:", options: ["Internal Politics Agency", "International Police Organization", "Inter-Parliamentary Union", "Internet Policy Group"], answer: "International Police Organization", source: "onepaper" },
            { question: "What does 'URL' stand for in the context of the internet?", options: ["Universal Resource Locator", "Uniform Resource Locator", "Universal Reference Link", "Uniform Reference Link"], answer: "Uniform Resource Locator", source: "onepaper" },
            { question: "The abbreviation 'OPEC' refers to an organization dealing with:", options: ["Petroleum Exporting", "Pacific Economic Cooperation", "Overseas Press Enforcement", "Optical Engineering Concepts"], answer: "Petroleum Exporting", source: "onepaper" },
            { question: "What does 'SIM' in 'SIM card' stand for?", options: ["Standard Internal Module", "Subscriber Identity Module", "Secure Information Manager", "System Integration Matrix"], answer: "Subscriber Identity Module", source: "onepaper" },
            { question: "The acronym 'RADAR' stands for:", options: ["Radio Detection and Ranging", "Rapid Deployment and Recovery", "Remote Analysis Data Acquisition", "Radio Direction and Reporting"], answer: "Radio Detection and Ranging", source: "onepaper" },
            { question: "'WHO' is the abbreviation for which UN agency?", options: ["World Health Organization", "World Humanitarian Office", "Western Hemisphere Organization", "World Habitat Organization"], answer: "World Health Organization", source: "onepaper" },
            { question: "What does 'FAQ' commonly stand for?", options: ["For All Questions", "Frequently Asked Questions", "Final Answer Quota", "Fast Access Query"], answer: "Frequently Asked Questions", source: "onepaper" },
            { question: "The abbreviation 'ATM' stands for:", options: ["Automated Teller Machine", "Automatic Transaction Mode", "Associated Treasury Management", "Account Transfer Medium"], answer: "Automated Teller Machine", source: "onepaper" },
            { question: "'Laser' is an acronym for:", options: ["Light Amplification by Stimulated Emission of Radiation", "Light Absorption Signal Emitter", "Longitudinal Acoustic Signal Reflector", "Low Altitude Surveillance Equipment"], answer: "Light Amplification by Stimulated Emission of Radiation", source: "onepaper" },
            { question: "What does 'NASA' stand for?", options: ["National Aeronautics and Space Administration", "North American Space Agency", "Naval Air and Sea Authority", "National Aerospace Security Agency"], answer: "National Aeronautics and Space Administration", source: "onepaper" },
            { question: "The term 'CPU' in computing refers to:", options: ["Central Processing Unit", "Computer Peripheral Unit", "Core Programming Utility", "Control Panel User"], answer: "Central Processing Unit", source: "onepaper" },
            { question: "'AIDS' stands for:", options: ["Acquired Immune Deficiency Syndrome", "Autoimmune Inflammatory Disease Syndrome", "Advanced Infection Disease Status", "Antibody Immunity Deterioration Syndrome"], answer: "Acquired Immune Deficiency Syndrome", source: "onepaper" },
            { question: "What does 'ISBN' stand for, commonly found on books?", options: ["International Standard Book Number", "Internal Serialized Barcode Notation", "Indexed System Book Network", "International Study Bibliography Name"], answer: "International Standard Book Number", source: "onepaper" },
            { question: "The abbreviation 'IMF' refers to which international organization?", options: ["International Monetary Fund", "International Maritime Federation", "Institute for Media Freedom", "Islamic Movement Forum"], answer: "International Monetary Fund", source: "onepaper" },
            { question: "'JPEG' or 'JPG' relates to what type of computer file?", options: ["Audio File", "Text Document", "Image File", "Video File"], answer: "Image File", source: "onepaper" },
            { question: "What does 'PDF' stand for?", options: ["Portable Document Format", "Printed Data File", "Personal Document Form", "Program Data Flow"], answer: "Portable Document Format", source: "onepaper" },
            { question: "The term 'Espionage' refers to:", options: ["Diplomatic negotiation", "The practice of spying", "International trade", "Cultural exchange"], answer: "The practice of spying", source: "onepaper" }, // Example of a 'Term'
            { question: "'Amnesia' is a term for:", options: ["Fear of heights", "Loss of memory", "Difficulty sleeping", "Excessive appetite"], answer: "Loss of memory", source: "onepaper" }, // Example of a 'Term'
            { question: "What does the acronym 'SCUBA' stand for?", options: ["Sub-aquatic Contained Underwater Breathing Apparatus", "Self-Contained Underwater Breathing Apparatus", "Surface Controlled Underwater Breathing Aid", "Secure Compartment Utility Buoyancy Aid"], answer: "Self-Contained Underwater Breathing Apparatus", source: "onepaper" },
            { question: "The abbreviation 'CEO' stands for:", options: ["Chief Executive Officer", "Central Enforcement Office", "Corporate Efficiency Overseer", "Company Executive Official"], answer: "Chief Executive Officer", source: "onepaper" },
            { question: "'GATT' was the predecessor to which international organization?", options: ["IMF", "World Bank", "WTO (World Trade Organization)", "NATO"], answer: "WTO (World Trade Organization)", source: "onepaper" },

        ];

        // --- DOM Elements ---
        const nameSection = document.getElementById('name-section');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const studentNameInput = document.getElementById('student-name');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const nameError = document.getElementById('name-error');
        const quizForm = document.getElementById('quiz-form');
        const timerDisplay = document.getElementById('timer');
        const submitQuizBtn = document.getElementById('submit-quiz-btn');

        const resultName = document.getElementById('result-name');
        const resultAttempted = document.getElementById('result-attempted');
        const resultScore = document.getElementById('result-score');
        const resultPercentage = document.getElementById('result-percentage');
        const resultTime = document.getElementById('result-time');

        const hiddenForm = document.getElementById('hidden-form');
        const hiddenName = document.getElementById('hidden-name');
        const hiddenAttempted = document.getElementById('hidden-attempted');
        const hiddenScore = document.getElementById('hidden-score');
        const hiddenPercentage = document.getElementById('hidden-percentage');
        const hiddenTime = document.getElementById('hidden-time');

        // --- State Variables ---
        let timerInterval;
        let timeLeft = quizDuration;
        let startTime;
        let endTime;
        let studentName = '';
        let shuffledQuestions = [];
        let quizSubmitted = false; // Flag to prevent multiple submissions

        // --- Functions ---

        // Function to shuffle array elements (Fisher-Yates Algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        // Function to shuffle options within a question
        function shuffleOptions(options) {
             // Create a copy to avoid modifying the original array
            const optionsCopy = [...options];
            // Shuffle the copied array
            return shuffleArray(optionsCopy);
        }

        // Function to load questions into the form
        function loadQuestions() {
            // Shuffle the main questions array and take the required number
            shuffledQuestions = shuffleArray([...quizQuestions]).slice(0, totalQuestions);

            quizForm.innerHTML = ''; // Clear previous questions
            shuffledQuestions.forEach((q, index) => {
                // Create container for each question
                const questionContainer = document.createElement('div');
                questionContainer.classList.add('question-container'); // Use new class for styling

                // Create question title element
                const questionTitle = document.createElement('p');
                questionTitle.classList.add('question-title'); // Use new class for styling
                // Use textContent for security unless HTML rendering is needed and sanitized
                questionTitle.textContent = `${index + 1}. ${q.question}`;
                questionContainer.appendChild(questionTitle);

                // Create div for options
                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('space-y-3'); // Adjusted space between options

                // Shuffle options for this specific question
                const shuffledOpts = shuffleOptions(q.options);

                // Create radio buttons and labels for each option
                shuffledOpts.forEach((option, optIndex) => {
                    const optionWrapper = document.createElement('div');
                    optionWrapper.classList.add('quiz-option');

                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.name = `question-${index}`;
                    radioInput.value = option;
                    // Ensure unique ID for label association
                    radioInput.id = `q${index}-opt${optIndex}`;

                    const label = document.createElement('label');
                    label.htmlFor = radioInput.id;
                    label.textContent = option;

                    optionWrapper.appendChild(radioInput);
                    optionWrapper.appendChild(label);
                    optionsDiv.appendChild(optionWrapper);
                });

                questionContainer.appendChild(optionsDiv);
                quizForm.appendChild(questionContainer); // Add the styled container to the form
            });
        }

        // Function to start the timer
        function startTimer() {
            startTime = new Date();
            timerDisplay.classList.remove('timer-warning'); // Ensure normal state initially
            timerDisplay.classList.add('timer-normal');

            timerInterval = setInterval(() => {
                if (quizSubmitted) { // Stop timer if quiz already submitted
                     clearInterval(timerInterval);
                     return;
                }

                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                // Auto-submit when time runs out
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "00:00";
                    if (!quizSubmitted) submitQuiz(); // Check flag before auto-submitting
                }
                 // Visual cue when time is low (e.g., last 1 minute)
                else if (timeLeft <= 60 && !timerDisplay.classList.contains('timer-warning')) {
                    timerDisplay.classList.remove('timer-normal');
                    timerDisplay.classList.add('timer-warning');
                } else if (timeLeft > 60 && timerDisplay.classList.contains('timer-warning')) {
                     timerDisplay.classList.remove('timer-warning');
                     timerDisplay.classList.add('timer-normal');
                }

            }, 1000);
        }

        // Function to calculate results
        function calculateResults() {
            endTime = new Date();
            let score = 0;
            let attempted = 0;

            shuffledQuestions.forEach((q, index) => {
                const selectedOption = quizForm.querySelector(`input[name="question-${index}"]:checked`);
                if (selectedOption) {
                    attempted++;
                    // Compare selected value with the correct answer
                    if (selectedOption.value === q.answer) {
                        score++;
                    }
                }
            });

            // Calculate time taken, handle potential negative duration if submitted instantly
            const timeTakenInSeconds = Math.max(0, Math.floor((endTime - startTime) / 1000));
            const minutesTaken = Math.floor(timeTakenInSeconds / 60);
            const secondsTaken = timeTakenInSeconds % 60;
            const timeTakenFormatted = `${minutesTaken}m ${secondsTaken}s`;

            // Calculate percentage
            const percentage = totalQuestions > 0 ? ((score / totalQuestions) * 100).toFixed(1) : 0;

            return {
                name: studentName,
                attempted: attempted,
                score: score,
                percentage: `${percentage}%`,
                timeTaken: timeTakenFormatted
            };
        }

        // Function to display results
        function displayResults(results) {
            resultName.textContent = results.name;
            resultAttempted.textContent = `${results.attempted} / ${totalQuestions}`;
            resultScore.textContent = `${results.score} / ${totalQuestions}`; // Show score out of total
            resultPercentage.textContent = results.percentage;
            resultTime.textContent = results.timeTaken;

            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
        }

        // Function to submit results to Formspree using Fetch API
        function submitToFormspree(results) {
            hiddenName.value = results.name;
            hiddenAttempted.value = results.attempted;
            hiddenScore.value = results.score;
            hiddenPercentage.value = results.percentage; // Send percentage
            hiddenTime.value = results.timeTaken;

            fetch(hiddenForm.action, {
                method: hiddenForm.method,
                body: new FormData(hiddenForm),
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Form submitted successfully to Formspree!');
                } else {
                     response.json().then(data => {
                        if (data.errors) {
                             console.error("Formspree submission errors:", data.errors.map(error => error.message).join(", "));
                        } else {
                            console.error('Formspree submission failed with status:', response.status);
                        }
                     });
                }
            }).catch(error => {
                console.error('Network error submitting form to Formspree:', error);
            });
        }


        // Function to handle quiz submission (manual or auto)
        function submitQuiz() {
            if (quizSubmitted) return; // Prevent multiple submissions
            quizSubmitted = true; // Set flag

            clearInterval(timerInterval); // Stop the timer definitively
            const results = calculateResults();
            displayResults(results);
            submitToFormspree(results);

             // Disable further interaction visually and functionally
            submitQuizBtn.disabled = true;
            submitQuizBtn.classList.add('opacity-50', 'cursor-not-allowed');
            quizForm.querySelectorAll('input[type="radio"]').forEach(input => {
                input.disabled = true;
                // Optional: Add visual cue for disabled options
                input.closest('.quiz-option').classList.add('opacity-60', 'cursor-not-allowed');
                input.closest('.quiz-option').querySelector('label').classList.add('cursor-not-allowed');
            });
        }

        // Function to disable specific keys and right-click
        function disableKeys(e) {
            // Disable F12
            if (e.keyCode === 123) {
                e.preventDefault(); return false;
            }
            // Disable Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+Shift+C
            if (e.ctrlKey && e.shiftKey && (e.keyCode === 'I'.charCodeAt(0) || e.keyCode === 'J'.charCodeAt(0) || e.keyCode === 'C'.charCodeAt(0))) {
                 e.preventDefault(); return false;
            }
            // Disable Ctrl+U
            if (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0)) {
                 e.preventDefault(); return false;
            }
             // Disable Ctrl+S
            if (e.ctrlKey && e.keyCode === 'S'.charCodeAt(0)) {
                 e.preventDefault(); return false;
            }
             // Disable Ctrl+P
             if (e.ctrlKey && e.keyCode === 'P'.charCodeAt(0)) {
                 e.preventDefault(); return false;
             }
             // Right Click is handled by oncontextmenu attribute in body tag
        }

        // --- Event Listeners ---
        startQuizBtn.addEventListener('click', () => {
            studentName = studentNameInput.value.trim();
            if (studentName) {
                nameError.classList.add('hidden');
                nameSection.classList.add('hidden');
                loadQuestions(); // Load questions into the form
                quizSection.classList.remove('hidden');
                startTimer(); // Start the countdown
            } else {
                nameError.classList.remove('hidden'); // Show error if name is empty
            }
        });

        submitQuizBtn.addEventListener('click', (e) => {
             e.preventDefault(); // Prevent default form action
             // Confirmation dialog before submitting
             if (!quizSubmitted && confirm('Are you sure you want to submit the quiz?')) {
                submitQuiz();
             }
        });

        // Prevent inspect element and saving page via keydown and context menu
        document.addEventListener('keydown', disableKeys);
        // The oncontextmenu="return false;" is already set on the body tag

        // --- Initial Setup ---
        // Quiz starts only after name entry, so no initial actions needed here.

    </script>

</body>
</html>
